function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}function _arrayWithHoles(e){if(Array.isArray(e))return e}
/**
 * @package   DPCalendar
 * @copyright Digital Peak GmbH. <https://www.digital-peak.com>
 * @license   http://www.gnu.org/licenses/gpl-3.0.html GNU/GPL
 */!function(){"use strict";function e(e,t,n){return null==localStorage.getItem(t.storageId)?(localStorage.setItem(t.storageId,JSON.stringify(t.calendarIds)),t.calendarIds):JSON.parse(localStorage.getItem(t.storageId)).filter((function(e){return t.calendarIds.findIndex((function(t){return String(t)===String(e)}))>=0}))}function t(e){var t=[];return t.month="dayGridMonth",t.week="timeGridWeek",t.day="timeGridDay",t.list="list",t.resyear="resourceTimelineYear",t.resmonth="resourceTimelineMonth",t.resweek="resourceTimelineWeek",t.resday="resourceTimelineDay",null!=e.resources&&(t.week="resourceTimeGridWeek",t.day="resourceTimeGridDay"),t}function n(e){var t=[];return t.dayGridMonth="month",t.timeGridWeek="week",t.timeGridDay="day",t.list="list",t.resourceTimelineYear="resyear",t.resourceTimelineMonth="resmonth",t.resourceTimelineWeek="resweek",t.resourceTimelineDay="resday",null!=e.resources&&(t.resourceTimeGridWeek="week",t.resourceTimeGridDay="day"),t}function r(e,t,n){var r="year="+e.getUTCFullYear()+"&month="+(e.getUTCMonth()+1)+"&day="+e.getUTCDate()+"&view="+t;n.use_hash&&window.location.hash.replace(/&amp;/gi,"&").replace("#","")!=r&&(window.location.hash=r)}var a=function(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n},o=function(e,t,n,r,o,i){return a((l=a(a(t,e),a(r,i)))<<(c=o)|l>>>32-c,n);var l,c},i=function(e,t,n,r,a,i,l){return o(t&n|~t&r,e,t,a,i,l)},l=function(e,t,n,r,a,i,l){return o(t&r|n&~r,e,t,a,i,l)},c=function(e,t,n,r,a,i,l){return o(t^n^r,e,t,a,i,l)},d=function(e,t,n,r,a,i,l){return o(n^(t|~r),e,t,a,i,l)},s=function(e,t,n){var r=_slicedToArray(e,4),a=r[0],o=r[1],l=r[2],c=r[3];return a=i(a,o,l,c,t[n+0],7,-680876936),c=i(c,a,o,l,t[n+1],12,-389564586),l=i(l,c,a,o,t[n+2],17,606105819),o=i(o,l,c,a,t[n+3],22,-1044525330),a=i(a,o,l,c,t[n+4],7,-176418897),c=i(c,a,o,l,t[n+5],12,1200080426),l=i(l,c,a,o,t[n+6],17,-1473231341),o=i(o,l,c,a,t[n+7],22,-45705983),a=i(a,o,l,c,t[n+8],7,1770035416),c=i(c,a,o,l,t[n+9],12,-1958414417),l=i(l,c,a,o,t[n+10],17,-42063),o=i(o,l,c,a,t[n+11],22,-1990404162),a=i(a,o,l,c,t[n+12],7,1804603682),c=i(c,a,o,l,t[n+13],12,-40341101),l=i(l,c,a,o,t[n+14],17,-1502002290),[a,o=i(o,l,c,a,t[n+15],22,1236535329),l,c]},u=function(e,t,n){var r=_slicedToArray(e,4),a=r[0],o=r[1],i=r[2],c=r[3];return a=l(a,o,i,c,t[n+1],5,-165796510),c=l(c,a,o,i,t[n+6],9,-1069501632),i=l(i,c,a,o,t[n+11],14,643717713),o=l(o,i,c,a,t[n],20,-373897302),a=l(a,o,i,c,t[n+5],5,-701558691),c=l(c,a,o,i,t[n+10],9,38016083),i=l(i,c,a,o,t[n+15],14,-660478335),o=l(o,i,c,a,t[n+4],20,-405537848),a=l(a,o,i,c,t[n+9],5,568446438),c=l(c,a,o,i,t[n+14],9,-1019803690),i=l(i,c,a,o,t[n+3],14,-187363961),o=l(o,i,c,a,t[n+8],20,1163531501),a=l(a,o,i,c,t[n+13],5,-1444681467),c=l(c,a,o,i,t[n+2],9,-51403784),i=l(i,c,a,o,t[n+7],14,1735328473),[a,o=l(o,i,c,a,t[n+12],20,-1926607734),i,c]},p=function(e,t,n){var r=_slicedToArray(e,4),a=r[0],o=r[1],i=r[2],l=r[3];return a=c(a,o,i,l,t[n+5],4,-378558),l=c(l,a,o,i,t[n+8],11,-2022574463),i=c(i,l,a,o,t[n+11],16,1839030562),o=c(o,i,l,a,t[n+14],23,-35309556),a=c(a,o,i,l,t[n+1],4,-1530992060),l=c(l,a,o,i,t[n+4],11,1272893353),i=c(i,l,a,o,t[n+7],16,-155497632),o=c(o,i,l,a,t[n+10],23,-1094730640),a=c(a,o,i,l,t[n+13],4,681279174),l=c(l,a,o,i,t[n],11,-358537222),i=c(i,l,a,o,t[n+3],16,-722521979),o=c(o,i,l,a,t[n+6],23,76029189),a=c(a,o,i,l,t[n+9],4,-640364487),l=c(l,a,o,i,t[n+12],11,-421815835),i=c(i,l,a,o,t[n+15],16,530742520),[a,o=c(o,i,l,a,t[n+2],23,-995338651),i,l]},_=function(e,t,n){var r=_slicedToArray(e,4),a=r[0],o=r[1],i=r[2],l=r[3];return a=d(a,o,i,l,t[n],6,-198630844),l=d(l,a,o,i,t[n+7],10,1126891415),i=d(i,l,a,o,t[n+14],15,-1416354905),o=d(o,i,l,a,t[n+5],21,-57434055),a=d(a,o,i,l,t[n+12],6,1700485571),l=d(l,a,o,i,t[n+3],10,-1894986606),i=d(i,l,a,o,t[n+10],15,-1051523),o=d(o,i,l,a,t[n+1],21,-2054922799),a=d(a,o,i,l,t[n+8],6,1873313359),l=d(l,a,o,i,t[n+15],10,-30611744),i=d(i,l,a,o,t[n+6],15,-1560198380),o=d(o,i,l,a,t[n+13],21,1309151649),a=d(a,o,i,l,t[n+4],6,-145523070),l=d(l,a,o,i,t[n+11],10,-1120210379),i=d(i,l,a,o,t[n+2],15,718787259),[a,o=d(o,i,l,a,t[n+9],21,-343485551),i,l]},m=function(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var n=[s,u,p,_];return Array.from({length:Math.floor(e.length/16)+1},(function(e,t){return 16*t})).reduce((function(t,r){return n.reduce((function(t,n){return n(t,e,r)}),t.slice()).map((function(e,n){return a(e,t[n])}))}),[1732584193,-271733879,-1732584194,271733878])},f=function(e){return Array(4*e.length).fill(8).reduce((function(t,n,r){return t+String.fromCharCode(e[r*n>>5]>>>r*n%32&255)}),"")},y=function(e){return Array.from(e).map((function(e){return e.charCodeAt(0)})).reduce((function(e,t,n){var r=e.slice();return r[8*n>>5]|=(255&t)<<8*n%32,r}),[])},v=function(e){var t=function(e){return"0123456789abcdef".charAt(e)};return Array.from(e).map((function(e){return e.charCodeAt(0)})).reduce((function(e,n,r){return e+t(n>>>4&15)+t(15&n)}),"")},h=function(e){if("string"!=typeof e)throw new TypeError("parameter ‘unicodeString’ is not a string");var t=function(e){return e.charCodeAt(0)};return e.replace(/[\u0080-\u07ff]/g,(function(e){return String.fromCharCode(192|t(e)>>6,128|63&t(e))})).replace(/[\u0800-\uffff]/g,(function(e){return String.fromCharCode(224|t(e)>>12,128|t(e)>>6&63,128|63&t(e))}))},E=function(e){return t=h(e),f(m(y(t),8*t.length));var t},D=function(e,t){return n=h(e),r=h(t),a=y(n),o=Array(16).fill(909522486),i=Array(16).fill(1549556828),a.length>16&&(a=m(a,8*n.length)),a.forEach((function(e,t){o[t]=909522486^e,i[t]=1549556828^e})),f(m(i.concat(m(o.concat(y(r)),512+8*r.length)),640));var n,r,a,o,i},A=function(e,t,n){return t?n?D(t,e):v(D(t,e)):n?E(e):v(E(e))};function C(a,o){var i=["/com_dpcalendar/js/popper/popper.js"];window.Intl||"object"===_typeof(window.Intl)||i.push("/com_dpcalendar/js/polyfill/intl.js"),o.resources?(i.push("/com_dpcalendar/css/scheduler/scheduler.css"),i.push("/com_dpcalendar/js/scheduler/scheduler.js")):(i.push("/com_dpcalendar/css/fullcalendar/fullcalendar.css"),i.push("/com_dpcalendar/js/fullcalendar/fullcalendar.js")),loadDPAssets(i,(function(){a.parentElement.parentElement.querySelector(".dp-loader").classList.add("dp-loader_hidden");var i=t(o),l=n(o);o.storageId=a.getAttribute("data-options")+"-calendar-state-"+A(o.calendarIds.toString()),function(e,r){var a=t(r),o=n(r);if(r.use_hash)for(var i=window.location.hash.replace(/&amp;/gi,"&").split("&"),l=0;l<i.length;l++)i[l].match("^#year")&&(r.year=i[l].substring(6)),i[l].match("^month")&&(r.month=i[l].substring(6)),i[l].match("^day")&&(r.date=i[l].substring(4)),i[l].match("^view")&&(r.initialView=i[l].substring(5));r.initialDate=new Date(r.year+"-"+DPCalendar.pad(parseInt(r.month),2)+"-"+DPCalendar.pad(r.date,2)),r.timeZone=Joomla.getOptions("DPCalendar.timezone"),r.initialView=a[r.initialView],document.body.clientWidth<r.screen_size_list_view&&"day"!=o[r.initialView]&&(r.initialView=a.list),r.schedulerLicenseKey="GPL-My-Project-Is-Open-Source",r.eventDisplay="block",r.progressiveEventRendering=!0,r.weekNumberTitle="",r.weekNumberFormat={week:"numeric"},r.moreLinkContent=Joomla.JText._("COM_DPCALENDAR_VIEW_CALENDAR_VIEW_TEXTS_MORE"),r.allDayContent=Joomla.JText._("COM_DPCALENDAR_VIEW_CALENDAR_ALL_DAY"),r.buttonText={today:Joomla.JText._("COM_DPCALENDAR_VIEW_CALENDAR_TOOLBAR_TODAY"),year:Joomla.JText._("COM_DPCALENDAR_VIEW_CALENDAR_VIEW_YEAR"),month:Joomla.JText._("COM_DPCALENDAR_VIEW_CALENDAR_VIEW_MONTH"),week:Joomla.JText._("COM_DPCALENDAR_VIEW_CALENDAR_VIEW_WEEK"),day:Joomla.JText._("COM_DPCALENDAR_VIEW_CALENDAR_VIEW_DAY"),list:Joomla.JText._("COM_DPCALENDAR_VIEW_CALENDAR_VIEW_LIST")},r.listTexts={until:Joomla.JText._("COM_DPCALENDAR_VIEW_CALENDAR_VIEW_TEXTS_UNTIL"),past:Joomla.JText._("COM_DPCALENDAR_VIEW_CALENDAR_VIEW_TEXTS_PAST"),today:Joomla.JText._("COM_DPCALENDAR_VIEW_CALENDAR_VIEW_TEXTS_TODAY"),tomorrow:Joomla.JText._("COM_DPCALENDAR_VIEW_CALENDAR_VIEW_TEXTS_TOMORROW"),thisWeek:Joomla.JText._("COM_DPCALENDAR_VIEW_CALENDAR_VIEW_TEXTS_THIS_WEEK"),nextWeek:Joomla.JText._("COM_DPCALENDAR_VIEW_CALENDAR_VIEW_TEXTS_NEXT_WEEK"),thisMonth:Joomla.JText._("COM_DPCALENDAR_VIEW_CALENDAR_VIEW_TEXTS_THIS_MONTH"),nextMonth:Joomla.JText._("COM_DPCALENDAR_VIEW_CALENDAR_VIEW_TEXTS_NEXT_MONTH"),future:Joomla.JText._("COM_DPCALENDAR_VIEW_CALENDAR_VIEW_TEXTS_FUTURE"),week:Joomla.JText._("COM_DPCALENDAR_VIEW_CALENDAR_VIEW_TEXTS_WEEK")}}(0,o),function(e,t){t.eventDragStart=function(e){e.el._tippy&&e.el._tippy.destroy()},t.eventDrop=function(e){if(e.event.resourceId)return e.revert(),!1;DPCalendar.request("task=event.move&Itemid="+Joomla.getOptions("DPCalendar.itemid"),(function(t){if(t.data.url&&e.event.setProp("url",t.data.url),t.data.description&&e.event.setExtendedProp("description",t.data.description),t.success)if(null!=t.messages){for(var n in t.messages)if("message"!=n)return void e.revert()}else e.revert();else e.revert()}),"id="+e.event.id+"&minutes="+dayjs.duration(e.delta).asMinutes()+"&allDay="+e.event.allDay)},t.eventResize=function(e){e.el._tippy&&e.el._tippy.destroy(),DPCalendar.request("task=event.move&Itemid="+Joomla.getOptions("DPCalendar.itemid"),(function(t){if(t.data.url&&e.event.setProp("url",t.data.url),t.data.description&&e.event.setExtendedProp("description",t.data.description),t.success)if(null!=t.messages){for(var n in t.messages)if("message"!=n)return void e.revert()}else e.revert();else e.revert()}),"id="+e.event.id+"&minutes="+dayjs.duration(e.endDelta).asMinutes()+"&onlyEnd=1&allDay="+e.event.allDay)}}(0,o),function(e,n){var a=t(n);n.eventClick=function(t){t.jsEvent.preventDefault(),t.jsEvent.currentTarget._tippy&&t.jsEvent.currentTarget._tippy.hide(),2!=n.show_event_as_popup&&(1!=n.show_event_as_popup?window.location=DPCalendar.encode(t.event.url):DPCalendar.modal(t.event.url,e.dataset.popupwidth,e.dataset.popupheight,(function(n){n.contentWindow.location.href.indexOf("view=form")>0&&DPCalendar.request("index.php?option=com_dpcalendar&task=event.checkin&e_id="+t.event.id+"&"+Joomla.getOptions("csrf.token")+"=1");var r=n.contentDocument||n.contentWindow.document;!r.getElementById("system-message-container")||r.getElementById("system-message-container").children.length<1||e.dpCalendar.refetchEvents()})))},n.dateClick=function(t){var o=e.parentElement.querySelector(".dp-quickadd .dp-form"),i=dayjs.utc(t.date);if(o){t.jsEvent.preventDefault(),t.view.type==a.month&&(i=(i=i.hour(8)).minute(0));var l=o.querySelector("#jform_start_date");l.value=i.format(l.getAttribute("data-format")),l.actualDate=l.value,(l=o.querySelector("#jform_start_date_time")).value=i.format(l.getAttribute("data-format")),l.actualDate=l.value,i=i.add(1,"hours");var c=o.querySelector("#jform_end_date");if(c.value=i.format(c.getAttribute("data-format")),c.actualDate=c.value,(c=o.querySelector("#jform_end_date_time")).value=i.format(c.getAttribute("data-format")),c.actualDate=c.value,t.resource){var d=t.resource.id.split("-");o.querySelector('input[name="jform[location_ids][]"]').value=[d[0]],d.length>1&&(o.querySelector('input[name="jform[rooms][]"]').value=[t.resource.id])}1==n.event_create_form&&window.innerWidth>600?(Popper.createPopper(t.jsEvent.target,o.parentElement,{onFirstUpdate:function(e){return e.elements.popper.querySelector("#jform_title").focus()}}),o.parentElement.style.display="block"):(o.querySelector("input[name=task]").value="",o.submit())}else n.headerToolbar.right.indexOf(a.day)>0&&r(t.date,"day",n)},document.body.addEventListener("click",(function(e){return!(e.target&&e.target.closest(".dp-event-tooltip__action-delete")&&!confirm(Joomla.JText._("COM_DPCALENDAR_CONFIRM_DELETE"))&&(e.preventDefault(),1))}))}(a,o),function(e,t){t.customButtons={},t.headerToolbar.left.indexOf("datepicker")&&(t.customButtons.datepicker={text:Joomla.JText._("COM_DPCALENDAR_VIEW_CALENDAR_SHOW_DATEPICKER"),icon:"icon-calendar",click:function(){loadDPAssets(["/com_dpcalendar/js/pikaday/pikaday.js","/com_dpcalendar/css/pikaday/pikaday.css"],(function(){var a=document.querySelector(".fc-datepicker-button"),o=a.querySelector("input");if(!o){(o=document.createElement("input")).setAttribute("type","hidden"),o.id="datepicker-input",a.appendChild(o);var i=Joomla.getOptions("DPCalendar.calendar.names");o.dpPicker=new Pikaday({field:o,trigger:a,i18n:{months:i.monthNames,weekdays:i.dayNames,weekdaysShort:i.dayNamesShort},onSelect:function(a){r(new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0)),n(t)[e.dpCalendar.view.type],t)}})}o.dpPicker.show()}))}}),t.headerToolbar.left.indexOf("print")&&(t.customButtons.print={text:Joomla.JText._("COM_DPCALENDAR_VIEW_CALENDAR_TOOLBAR_PRINT"),icon:"icon-print",click:function(){var e=window.open();loadDPAssets(["/com_dpcalendar/js/domurl/url.js"],(function(){var n=new Url;n.query.layout="print"+(t.resources?"timeline":""),n.query.tmpl="component",e.location.href=n.decode(n.toString()),e.focus()}))}}),t.headerToolbar.left.indexOf("add")&&t.event_create_url&&(t.customButtons.add={text:Joomla.JText._("COM_DPCALENDAR_VIEW_CALENDAR_TOOLBAR_ADD"),icon:"icon-add",click:function(){return location.href=t.event_create_url}}),t.headerToolbar.left.indexOf("fullscreen")&&(t.customButtons.fullscreen_open={icon:"icon-fullscreen",text:Joomla.JText._("COM_DPCALENDAR_VIEW_CALENDAR_TOOLBAR_FULLSCREEN_OPEN"),click:function(){document.querySelector(".com-dpcalendar-calendar").requestFullscreen(),document.querySelector(".fc-fullscreen_open-button").style.setProperty("display","none","important"),document.querySelector(".fc-fullscreen_close-button").style.setProperty("display","inherit","important")}},t.customButtons.fullscreen_close={icon:"icon-fullscreen",text:Joomla.JText._("COM_DPCALENDAR_VIEW_CALENDAR_TOOLBAR_FULLSCREEN_CLOSE"),click:function(){document.fullscreenElement&&document.exitFullscreen(),document.querySelector(".fc-fullscreen_open-button").style.setProperty("display","inherit","important"),document.querySelector(".fc-fullscreen_close-button").style.setProperty("display","none","important")}})}(a,o),function(e,r){if(r.use_hash){var a=t(r),o=n(r);window.addEventListener("hashchange",(function(){var t=new Date,n=t.getUTCFullYear(),i=t.getUTCMonth()+1,l=t.getUTCDate(),c=o[r.initialView];window.location.hash.replace(/&amp;/gi,"&").split("&").forEach((function(e){e.match("^#year")&&(n=e.substring(6)),e.match("^month")&&(i=e.substring(6)-1),e.match("^day")&&(l=e.substring(4)),e.match("^view")&&(c=e.substring(5))}));var d=new Date(Date.UTC(n,i,l,0,0,0)),s=e.dpCalendar.getDate(),u=e.dpCalendar.view;d.getUTCFullYear()==s.getUTCFullYear()&&d.getUTCMonth()==s.getUTCMonth()&&d.getUTCDate()==s.getUTCDate()||e.dpCalendar.gotoDate(d),u.type!=a[c]&&e.dpCalendar.changeView(a[c])}))}}(a,o),function(t,n){t.dpEventMarkerSet=[],n.viewClassNames=function(e){var r=t.parentElement.querySelector(".dp-map");DPCalendar.Map&&null!=r&&n.show_map&&(t.dpEventMarkerSet=[],DPCalendar.Map.clearMarkers(r))},n.eventContent=function(e){var t='<span class="dp-event__time">'+e.timeText+'</span><span class="dp-event__title">'+e.event.title+"</span>";return void 0!==e.event.extendedProps.capacity&&0!=e.event.extendedProps.capacity&&(t+='<span class="dp-event__capacity"><svg class="dp-event__capacity-icon"><use href="#dp-icon-users"/></svg>',t+='<span class="dp-event__capacity-text">',null===e.event.extendedProps.capacity?t+=Joomla.JText._("COM_DPCALENDAR_FIELD_CAPACITY_UNLIMITED"):t+=e.event.extendedProps.capacity_used+"/"+e.event.extendedProps.capacity,t+="</span>",t+="</span>"),"list"==e.view.type&&(t='<a href="'+e.event.url+'">'+t+"</a>"),{html:t}},n.eventDidMount=function(e){e.event.view_class&&e.el.classList.add(e.event.view_class),"list"!=e.view.type&&(e.el.style.fill=e.event.textColor);var r=e.event.extendedProps.description;r&&(r=(r=r.replace("task=event.delete","task=event.delete&urlhash="+encodeURIComponent(window.location.hash))).replace("task=event.edit","task=event.edit&urlhash="+encodeURIComponent(window.location.hash)),e.isMirror||loadDPAssets(["/com_dpcalendar/js/tippy/tippy.js","/com_dpcalendar/css/tippy/tippy.css"],(function(){document.createElement("div").innerHTML=r,tippy(e.el,{interactive:!0,delay:100,arrow:!0,content:r,allowHTML:!0,ignoreAttributes:!0,appendTo:document.body,theme:"light",touch:!1,onShow:function(e){return e.popper.querySelector('div[role="tooltip"]').classList.add("show")},popperOptions:{modifiers:[{name:"preventOverflow",enabled:!1},{name:"hide",enabled:!1}]}})})));var a=t.parentElement.querySelector(".dp-map");DPCalendar.Map&&null!=a&&n.show_map&&e.event.extendedProps.location&&e.event.extendedProps.location.forEach((function(n){if(!t.dpEventMarkerSet[e.event.id+" "+n.latitude+" "+n.longitude]){var o=JSON.parse(JSON.stringify(n));o.title=e.event.title,o.color=e.event.backgroundColor,e.event.url&&r&&(r=r.replace(e.event.title,'<a href="'+e.event.url+'">'+e.event.title+"</a>")),o.description=r,t.dpEventMarkerSet[e.event.id+" "+n.latitude+" "+n.longitude]=o,DPCalendar.Map.createMarker(a,o)}}))},n.eventDataTransform=function(e){if(e.allDay){var t=dayjs(e.end);t=t.add(1,"day"),e.end=t.format("YYYY-MM-DD")}return e},n.loading=function(e){e?t.parentElement.parentElement.querySelector(".dp-loader").classList.remove("dp-loader_hidden"):t.parentElement.parentElement.querySelector(".dp-loader").classList.add("dp-loader_hidden")},n.eventSources=[],e(0,n,DPCalendar).forEach((function(e,t){n.eventSources[t]={id:e,events:function(t,r,a){DPCalendar.request(n.requestUrlRoot+"&ids="+e+"&date-start="+t.startStr+"&date-end="+t.endStr,(function(e){return r(e.data)}),null,!1)}}}))}(a,o),function(t,n,r){var a=e(0,n),o=t.parentElement,i=o.querySelector(".com-dpcalendar-calendar__toggle, .com-dpcalendar-calendar-timeline__toggle");i&&i.addEventListener("click",(function(){r.slideToggle(o.querySelector(".com-dpcalendar-calendar__list, .com-dpcalendar-calendar-timeline__list"),(function(e){if(!e)return o.querySelector('[data-direction="up"]').classList.add("dp-toggle_hidden"),void o.querySelector('[data-direction="down"]').classList.remove("dp-toggle_hidden");o.querySelector('[data-direction="up"]').classList.remove("dp-toggle_hidden"),o.querySelector('[data-direction="down"]').classList.add("dp-toggle_hidden")}))}));var l=[].slice.call(t.parentElement.querySelectorAll(".com-dpcalendar-calendar__calendars .dp-input-checkbox, .com-dpcalendar-calendar-timeline__calendars .dp-input-checkbox"));l.forEach((function(e){a.forEach((function(t){t==e.value&&(e.checked=!0)})),e.addEventListener("click",(function(e){var o=e.target,i=o.value;o.checked?(t.dpCalendar.addEventSource({id:i,events:function(e,t,a){r.request(n.requestUrlRoot+"&ids="+i+"&date-start="+e.startStr+"&date-end="+e.endStr,(function(e){return t(e.data)}),null,!1)}}),a.push(i)):(t.dpCalendar.getEventSources().forEach((function(e){e.id==i&&e.remove()})),a.forEach((function(e,t){e==i&&a.splice(t,1)}))),localStorage.setItem(n.storageId,JSON.stringify(a))}))}));var c=document.querySelector(".com-dpcalendar-calendar__list-toggle .dp-input-checkbox, .com-dpcalendar-calendar-timeline__list-toggle .dp-input-checkbox");c&&c.addEventListener("click",(function(){l.forEach((function(e){e.checked=!c.checked,e.click()}))}))}(a,o,DPCalendar);var c=Joomla.getOptions("DPCalendar.calendar.names");dayjs.updateLocale("en",{months:c.monthNames,monthsShort:c.monthNamesShort,weekdays:c.dayNames,weekdaysShort:c.dayNamesShort,weekdaysMin:c.dayNamesMin});var d=o.views;if(o.views={},Object.keys(d).forEach((function(e){var t=d[e].titleFormat;d[e].titleFormat=function(n){return"list"==e||"week"==e||"resweek"==e?dayjs(n.start.array).format(t)+" - "+dayjs(n.end.array).format(t):dayjs(n.start.array).format(t)},o.views[i[e]]=d[e],d[e].slotDuration&&d[e].slotDuration.indexOf("{")>-1&&(d[e].slotDuration=JSON.parse(d[e].slotDuration)),d[e].slotLabelInterval&&d[e].slotLabelInterval.indexOf("{")>-1&&(d[e].slotLabelInterval=JSON.parse(d[e].slotLabelInterval))})),o.headerToolbar.right){var s="";o.headerToolbar.right.split(",").forEach((function(e,t){s+=(0!=t?",":"")+i[e]})),o.headerToolbar.right=s}o.datesSet=function(e){r(a.dpCalendar.getDate(),l[e.view.type],o),function(e){var t=function(t,n){var r=e.parentElement.querySelector(".dp-icon_"+t),a=e.parentElement.querySelector(".fc-"+n+"-button .fc-icon");null!==r&&null!==a&&(a.innerHTML=r.outerHTML)};t("angle-left","prev"),t("angle-right","next"),t("calendar-alt","datepicker"),t("expand-alt","fullscreen_open"),t("compress-alt","fullscreen_close"),t("print","print"),t("plus","add")}(a)};var u=new FullCalendar.Calendar(a,o);a.dpCalendar=u,u.render()}))}[].slice.call(document.querySelectorAll(".dp-calendar")).forEach((function(e){e.getAttribute("data-options")&&loadDPAssets(["/com_dpcalendar/js/dayjs/dayjs.js","/com_dpcalendar/js/dpcalendar/dpcalendar.js"],(function(){var t=Joomla.getOptions(e.getAttribute("data-options"));"string"==typeof(t=Object.assign(t,e.dataset)).hiddenDays&&(t.hiddenDays=JSON.parse(t.hiddenDays)),C(e,t)}))}))}();